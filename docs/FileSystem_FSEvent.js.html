<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: FileSystem/FSEvent.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: FileSystem/FSEvent.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { FSBranchNode } from './FSNode.js';

export class FSEvent {
  static get type() {
    return 'event';
  }

  constructor(target) {
    this._path = target.path;
    this._target = target;

    this.bubbles = true;
  }

  get path() {
    return this._path;
  }

  get target() {
    return this._target;
  }

  get type() {
    return this.constructor.type;
  }

  combine(fsEvent) {
    return fsEvent == this ? this : null;
  }

  relativeTo(fsNode) {
    return this;
  }
}

// FSNode Events

export class FSMoveEvent extends FSEvent {
  static get type() {
    return 'move';
  }

  /**
   * @param {FSNode?} previousParent
   * @param {string} previousPath
   * @param {string} previousName
   */
  constructor(target, previousParent, previousPath, previousName) {
    super(target);

    this._name = target.name;
    this._parent = target.parent;
    this._previousName = previousName;
    this._previousParent = previousParent;
    this._previousPath = previousPath;
  }

  get name() {
    return this._name;
  }

  get parent() {
    return this._parent;
  }

  get previousName() {
    return this._previousName;
  }

  get previousParent() {
    return this._previousParent;
  }

  get previousPath() {
    return this._previousPath;
  }

  combine(fsEvent) {
    if (
      fsEvent instanceof FSMoveEvent
      &amp;&amp; fsEvent.target == this.target
      &amp;&amp; this.parent == fsEvent.previousParent
      &amp;&amp; this.name == fsEvent.previousName
    ) {
      return new FSMoveEvent(fsEvent.target, this.previousParent, this.previousName);
    }

    return super.combine(fsEvent);
  }

  relativeTo(fsNode) {
    const previouslyContained = fsNode &amp;&amp; (fsNode == this.previousParent || fsNode.contains(this.previousParent));

    if (fsNode &amp;&amp; fsNode.contains(this.target)) {
      return previouslyContained ? this : new FSCreateEvent(this.target);
    }

    if (previouslyContained) {
      return new FSDeleteEvent(this.target);
    }

    return fsNode == this.target &amp;&amp; this.name != this.previousName ? this : new FSEvent(this.target);
  }
}

export class FSCreateEvent extends FSMoveEvent {
  static get type() {
    return 'create';
  }

  constructor(target) {
    super(target, null, '', '');
  }

  get isDirectory() {
    return this.target instanceof FSBranchNode;
  }
}

export class FSDeleteEvent extends FSMoveEvent {
  static get type() {
    return 'delete';
  }

  constructor(target) {
    super(target);

    this._name = '';
    this._parent = null;
    this._path = '';
  }
}

// File Events

export class FSWriteEvent extends FSEvent {
  static get type() {
    return 'write';
  }

  constructor(target) {
    super(target);

    this._content = target.read();
  }

  get content() {
    return this._content;
  }

  combine(fsEvent) {
    if (fsEvent instanceof FSWriteEvent &amp;&amp; fsEvent.target == this.target) {
      return new FSWriteEvent(fsEvent.target);
    }

    return super.combine(fsEvent);
  }
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="DoesNotExistError.html">DoesNotExistError</a></li><li><a href="FilePath.html">FilePath</a></li><li><a href="FSMoveEvent_FSMoveEvent.html">FSMoveEvent</a></li><li><a href="Host.html">Host</a></li><li><a href="NotADirectoryError.html">NotADirectoryError</a></li><li><a href="NotAFileError.html">NotAFileError</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a>
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
